[gd_scene load_steps=11 format=3 uid="uid://e8stwvfqt3qr"]

[ext_resource type="Texture2D" uid="uid://c3adw6s244m2h" path="res://assets/Pixel Crawler - FREE - 1.8/Enemy/Skeleton Crew/Skeleton - Warrior/Run/Run-Sheet.png" id="2_3l535"]

[sub_resource type="GDScript" id="GDScript_yus0n"]
script/source = "extends StaticBody2D

@export var moveTowards: Node2D # the point the enemy is trying to reach
@export var speed: float # The speed of the eney
@export var attack_range: float # The range of the arrack


func _physics_process(delta):
	var direction: Vector2 = moveTowards.position - position
	# chek if the enemy is in range to stop moving
	# if it is, attack the target
	# if it is not, move the player towards the target
	
	if(!is_in_range(direction)):
		move(direction)
	
	# flip the enemy
	
func move(direction: Vector2):
	# getting the direction vecotor
	#var direction: Vector2 = (moveTowards.position - position).normalized()
	var normalized_direction = direction.normalized()
	
	# moving the enemy
	position += normalized_direction * speed
	
func is_in_range(direction: Vector2):
	# if the ennemy is in range, return true, if it's not, return false
	return(direction.length() < attack_range)
"

[sub_resource type="AtlasTexture" id="AtlasTexture_t7k46"]
atlas = ExtResource("2_3l535")
region = Rect2(0, 32, 64, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_a8nb2"]
atlas = ExtResource("2_3l535")
region = Rect2(64, 32, 64, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_f74ad"]
atlas = ExtResource("2_3l535")
region = Rect2(128, 32, 64, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8v2tp"]
atlas = ExtResource("2_3l535")
region = Rect2(192, 32, 64, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jphii"]
atlas = ExtResource("2_3l535")
region = Rect2(256, 32, 64, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_np4tr"]
atlas = ExtResource("2_3l535")
region = Rect2(320, 32, 64, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_ape8m"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_t7k46")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a8nb2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f74ad")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8v2tp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jphii")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_np4tr")
}],
"loop": true,
"name": &"default",
"speed": 12.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_dfq3u"]

[node name="SkeletonWarrior" type="StaticBody2D"]
script = SubResource("GDScript_yus0n")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_ape8m")
frame_progress = 0.645124

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_dfq3u")
